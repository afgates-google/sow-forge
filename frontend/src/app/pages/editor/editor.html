<div class="editor-container" *ngIf="project">
  <div class="editor-header">
    <h2>Editing SOW: {{ project.projectName }}</h2>
    <div class="editor-actions">
      <span class="status-message">{{ statusMessage }}</span>
      <a *ngIf="project.google_doc_url" [href]="project.google_doc_url" target="_blank" class="gdoc-link">View Google Doc</a>
      <button (click)="createGoogleDoc()" [disabled]="isCreatingGDoc">
        {{ isCreatingGDoc ? 'Creating...' : 'Create Google Doc' }}
      </button>
      <button (click)="saveSow()" [disabled]="!isDirty || isSaving">
        {{ isSaving ? 'Saving...' : 'Save Changes' }}
      </button>
    </div>
  </div>

  <!-- NEW: Tab Navigation -->
  <div class="tab-nav">
    <button class="tab-button" [class.active]="activeTab === 'write'" (click)="activeTab = 'write'">
      Write
    </button>
    <button class="tab-button" [class.active]="activeTab === 'preview'" (click)="activeTab = 'preview'">
      Preview
    </button>
  </div>

  <!-- NEW: Tabbed Editor Content -->
  <div class="editor-content">
    <textarea 
      *ngIf="activeTab === 'write'"
      class="markdown-editor" 
      [(ngModel)]="editableSowText">
    </textarea>
    
    <div *ngIf="activeTab === 'preview'" class="markdown-preview">
      <markdown [data]="editableSowText"></markdown>
    </div>
  </div>
</div>

<div *ngIf="!project" class="loading-container">
  <p>Loading SOW content...</p>
</div>